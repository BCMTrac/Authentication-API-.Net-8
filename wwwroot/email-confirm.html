<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Email Confirmation · BCMTrac</title>

    <!-- CSP: keep tight, allow Bootstrap CSS CDN only -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com; img-src 'self' data:; connect-src 'self';" />
    <meta name="referrer" content="no-referrer" />

    <!-- Bootstrap CSS (no JS needed) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Shared styles then page styles -->
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/email-confirm.css" />
</head>
<body>
    <main class="auth-shell">
        <section class="auth-card">
            <div class="p-4 p-sm-5">
                <div class="text-center mb-3">
                    <div class="brand">BCMTrac</div>
                </div>

                <div id="alert-placeholder" class="mb-3" aria-live="polite"></div>

                <!-- Confirm View -->
                <div id="confirm-view">
                    <h1 class="h4 text-center mb-2">Confirm your email</h1>
                    <p class="subtitle text-center mb-4">Use the fields below or simply open this page via the link in your email — the form will auto‑fill.</p>

                    <form id="confirm-form" class="mb-3" novalidate>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="email" placeholder="Email" autocomplete="email" required />
                            <label for="email">Email</label>
                            <div class="invalid-feedback">Please enter a valid email address.</div>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="token" placeholder="Token" inputmode="verbatim" required />
                            <label for="token">Token</label>
                            <div class="invalid-feedback">Token is required.</div>
                        </div>
                    </form>

                    <div class="d-grid d-sm-flex gap-2 justify-content-center">
                        <button id="confirm-account-btn" class="btn btn-primary">
                            <span class="btn-label">Confirm account</span>
                            <span class="spinner-border d-none align-middle ms-2" role="status" aria-hidden="true"></span>
                        </button>
                        <button id="confirm-change-btn" class="btn btn-outline-primary">
                            <span class="btn-label">Confirm change</span>
                            <span class="spinner-border d-none align-middle ms-2" role="status" aria-hidden="true"></span>
                        </button>
                    </div>

                    <div class="divider my-4"><span>or</span></div>
                    <p class="text-center mb-0"><a class="link-muted" href="/index.html">Back to sign in</a></p>
                </div>

                <!-- Success View -->
                <div id="success-view" class="d-none text-center">
                    <h2 class="h4 mb-2">Email confirmed</h2>
                    <p class="subtitle mb-4">Your email address has been confirmed successfully.</p>
                    <a href="/index.html" class="btn btn-primary">Continue to sign in</a>
                </div>
            </div>
        </section>
    </main>

    <script src="/js/email-confirm.js"></script>
</body>
</html>

