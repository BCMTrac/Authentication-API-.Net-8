@base = https://localhost:7086
@json = application/json
@username = usertest1234567
@email = test1234567@example.com 
@password = StrongP@ssw0rd!X

### Ping (sanity)
GET {{base}}/api/ping

### Register (username, email, password required)
POST {{base}}/api/v1/authenticate/register
Content-Type: {{json}}

{
  "username": "{{username}}",
  "email": "{{email}}",
  "password": "{{password}}"
}

### Request Email Confirmation (check your SMTP inbox for the token)
POST {{base}}/api/v1/authenticate/request-email-confirm
Content-Type: {{json}}

{
  "email": "{{email}}"
}

### Confirm Email (paste token from your inbox below)
@confirm_token = CfDJ8C5OvvvVXLdJvgw2nk4E5T6BgXIcK4qXbOsOQaVH0az12sRsJYyheOfnQsdCA2gfXoNMAhpf+cj7mQvIjQgRF3RFhc5C1IlOR0gkOpFCl2taDgIr9RjPtwExcvwEVUq/tBABlVbt2z7c2S99JwQmD8VxX1vMqSD9xjMsjV4gkdFRWK4bGbdFjS18a6oY12ZpKg9UCWpr7WoGmsMcO/jJYOPot/YXgBL48eO4q2mSpWQZwFIHcDIjLfrpEiuyCirodg==

POST {{base}}/api/v1/authenticate/confirm-email
Content-Type: {{json}}

{
  "email": "{{email}}",
  "token": "{{confirm_token}}"
}

### Login (identifier can be email or username)
POST {{base}}/api/v1/authenticate/login
Content-Type: {{json}}
X-Login-Id: {{email}}

{
  "identifier": "{{email}}",
  "password": "{{password}}"
}

### Me (copy the token value from Login response and paste below)
@accessToken = eyJhbGciOiJSUzI1NiIsImtpZCI6IjhkMTU2NGNmNjBhZjRhMzAiLCJ0eXAiOiJKV1QifQ.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoidXNlcnRlc3QxMjM0NTY3IiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiI4YTg2ZmU4Mi00MTIwLTRiY2YtODYyMy03NWE4YmU2MmE2OTgiLCJqdGkiOiJkNTA5NjEzZC0xODM4LTRmYTAtOTllMS05ZmEwY2E4YjA5ODkiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJVc2VyIiwidG9rZW5fdmVyc2lvbiI6IjAiLCJzaWQiOiIwYTJlMTI4YS1jZTFjLTRlMjUtOTcwMi0zZTNlN2NjYzNiYTgiLCJuYmYiOjE3NTczMzk1ODksImV4cCI6MTc1NzM0MDQ4OSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJjbXRyYWNrLmNvbSIsImF1ZCI6Imh0dHBzOi8vYXBpLmJjbXRyYWNrLmNvbSJ9.j-yIWJBec4cFjWJIoXSEgZ_u4UmTYFYvSj_lvfO3Q-Ptm_6KW5hxwg9-Ns19puNbpxcN5mbCsW-0tZPxj3GEcfRLgLqKnLFfK7s0pG07sDB55PDi4qTjqwwj4hWYTEDFcxAZKxeM3sUL8vujhRLIBAt78tqMPAbfiNn2rZFLO_scp-xeswvtJBgejtTSvC2UplFcvv-zs6TVMKIghUNJkGJhstcM4y5dQIZY2MPUjhYD4OoUq-leZK42KWi7Qnp_Bl_9hd6_e67erPEm3LURYN4jIFpLopTu7O-5uy9ZR7ru-_UOJDd8f6rQEzPt4nQHmeBBpQX8wbF96N_7Zba8CRUYqdtWmrP5J4lsPH74QzRQJWNeyUP_yyz8gZg8JbWZq8vYaVTHEVgg_8f6pWCiYIz6U67fRdpxDi_pmiyUARukSrm5w5oDxSbBd0TT7ClnKDwHzGPmPgy3lV5y6ALqVPg6mFOTMDRqv3L9yjsQzmaLwl98WiVfe0c-UABJq_sb

GET {{base}}/api/v1/users/me
Authorization: Bearer {{accessToken}}

### Refresh (copy refreshToken from Login response)
@refreshToken = G1yP3BdkHT9sYaTQaqjwRMWvdvRCvsjkdnw8sFDVw9ehiLTpux208qE5CwMYa+FaVh/T3oJQTS1hSQNfU2TNJw==
POST {{base}}/api/v1/authenticate/refresh
Content-Type: {{json}}

{
  "refreshToken": "{{refreshToken}}"
}

### MFA Enroll Start (requires access token)
POST {{base}}/api/v1/authenticate/mfa/enroll/start
Authorization: Bearer {{accessToken}}

### MFA Enroll Confirm (paste current 6-digit code from your app)
@mfa_code = 000000
POST {{base}}/api/v1/authenticate/mfa/enroll/confirm
Authorization: Bearer {{accessToken}}
Content-Type: {{json}}

{
  "code": "{{mfa_code}}"
}

### Password Reset Request
POST {{base}}/api/v1/authenticate/request-password-reset
Content-Type: {{json}}

{
  "email": "{{email}}"
}

### Password Reset Confirm (paste reset token from your inbox)
@reset_token = PASTE_RESET_TOKEN
POST {{base}}/api/v1/authenticate/confirm-password-reset
Content-Type: {{json}}

{
  "email": "{{email}}",
  "token": "{{reset_token}}",
  "newPassword": "StrongerP@ssw0rd!!X"
}
